<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Service Worker</title>
</head>
<body>
	<h1>This is a sw test</h1>
	<script type="text/javascript">
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', function() {
				navigator.serviceWorker.register('sw.js').then(function(registration) {
					// Registration was successful
					console.log('ServiceWorker registration successful with scope: ', registration.scope);
					document.write('<h1>当前监听作用域：<span style="color: red;">' + registration.scope + '</span></h1>');
				}).catch(function(err) {
					// registration failed :(
					console.log('ServiceWorker registration failed: ', err);
					document.write('<h2>' + err + '</h2>');
					
					console.log(err.message, err.message.indexOf("The URL protocol of the current origin ('null') is not supported.") != -1);
					if (err.message.indexOf("The URL protocol of the current origin ('null') is not supported.") != -1 ) {
						document.write('<h1 style="color: red;">Are you online ?</h1>');
					}
				});
			});
		}
	</script>
</body>
</html>